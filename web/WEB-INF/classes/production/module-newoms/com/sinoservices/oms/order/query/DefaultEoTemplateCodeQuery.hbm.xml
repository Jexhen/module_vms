<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="DefaultEoTemplateCodeQuery">
		<![CDATA[

SELECT DISTINCT
	   EOEU.EOEU_ID,
	   EOTO.EOTO_CODE,
       EOTO.EOTO_NAME,
       EOEU.EOEU_EOTO_CODE, 
       EOEU.EOEU_DEFAULT,
       ESUS.ESUS_LOGIN_NAME
  FROM EO_EORE_2_ESPU EOEU 
  LEFT JOIN  EO_TEMPLATE_ORDER EOTO
    ON EOTO.EOTO_CODE = EOEU.EOEU_EOTO_CODE
   AND EOTO.ORG_ID = EOEU.ORG_ID
  LEFT JOIN ES_USER ESUS
    ON EOEU.EOEU_ESUS_ID = ESUS.ESUS_ID
   AND EOEU.ORG_ID = ESUS.ESUS_ESCO_ID
   WHERE EOEU.EOEU_DEFAULT='Y'
  << AND EOEU.EOEU_EOTO_CODE<>:eotoCode>>
  <<AND EOEU.ORG_ID=:orgId>>
  << AND ESUS.ESUS_ID=:esusId>>

		]]>
	</sql-query>
</hibernate-mapping>
