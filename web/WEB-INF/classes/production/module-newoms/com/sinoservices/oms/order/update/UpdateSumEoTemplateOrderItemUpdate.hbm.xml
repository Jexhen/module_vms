<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="UpdateSumEoTemplateOrderItemUpdate">
		<![CDATA[
		
UPDATE EO_TEMPLATE_ORDER EOTO
	SET EOTO.EOTO_PACKAGE_QUANTITY = 
  (SELECT SUM(EOTI.EOTI_PACKAGE_QUANTITY)
  FROM EO_TEMPLATE_ORDER_ITEM EOTI
  WHERE EOTI.EOTI_EOTO_CODE = EOTO.EOTO_CODE
  AND EOTI.ORG_ID = EOTO.ORG_ID
  AND EOTO.EOTO_CODE IN (:code) AND EOTO.ORG_ID=:orgId),
  
  EOTO.EOTO_QUANTITY = 
  (SELECT SUM(EOTI.EOTI_QUANTITY)
   FROM EO_TEMPLATE_ORDER_ITEM EOTI
  WHERE EOTI.EOTI_EOTO_CODE = EOTO.EOTO_CODE
  AND EOTI.ORG_ID = EOTO.ORG_ID
  AND EOTO.EOTO_CODE IN (:code) AND EOTO.ORG_ID=:orgId),
  
  EOTO.EOTO_GROSS_WEIGHT = 
  (SELECT SUM(EOTI.EOTI_GROSS_WEIGHT)
   FROM EO_TEMPLATE_ORDER_ITEM EOTI
  WHERE EOTI.EOTI_EOTO_CODE = EOTO.EOTO_CODE
  AND EOTI.ORG_ID = EOTO.ORG_ID
  AND EOTO.EOTO_CODE IN (:code) AND EOTO.ORG_ID=:orgId),
  
  EOTO.EOTO_NET_WEIGHT =
  (SELECT SUM(EOTI.EOTI_NET_WEIGHT)
   FROM EO_TEMPLATE_ORDER_ITEM EOTI
  WHERE EOTI.EOTI_EOTO_CODE = EOTO.EOTO_CODE
  AND EOTI.ORG_ID = EOTO.ORG_ID
  AND EOTO.EOTO_CODE IN (:code) AND EOTO.ORG_ID=:orgId),
  
  EOTO.EOTO_VOLUME =
  (SELECT SUM(EOTI.EOTI_VOLUME)
   FROM EO_TEMPLATE_ORDER_ITEM EOTI
  WHERE EOTI.EOTI_EOTO_CODE = EOTO.EOTO_CODE
  AND EOTI.ORG_ID = EOTO.ORG_ID
  AND EOTO.EOTO_CODE IN (:code) AND EOTO.ORG_ID=:orgId)
  
 WHERE EOTO.EOTO_CODE IN (:code) AND EOTO.ORG_ID=:orgId
		
		
		]]>
	</sql-query>
</hibernate-mapping>