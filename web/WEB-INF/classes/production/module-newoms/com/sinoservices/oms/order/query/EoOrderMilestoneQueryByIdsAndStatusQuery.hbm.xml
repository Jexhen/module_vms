<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="EoOrderMilestoneQueryByIdsAndStatusQuery">
		<![CDATA[

SELECT EOOR.EOOR_ID,(CASE WHEN NVL(MAX(EOOM.EOOM_SEQUENCE),10)>40 THEN MAX(EOOM.EOOM_SEQUENCE)+1 ELSE NVL(MAX(EOOM.EOOM_SEQUENCE),10) END) AS EOOM_MAX_SEQUENCE
 FROM EO_ORDER EOOR 
LEFT JOIN EO_ORDER_MILESTONE EOOM
ON EOOR.EOOR_ORDER_NO=EOOM.EOOM_ORDER_NO AND EOOR.ORG_ID=EOOM.ORG_ID
WHERE 1=1 
<<AND EOOR.EOOR_ID IN (:eoorIds)>>
GROUP BY EOOR.EOOR_ID

		]]>
	</sql-query>
</hibernate-mapping>
