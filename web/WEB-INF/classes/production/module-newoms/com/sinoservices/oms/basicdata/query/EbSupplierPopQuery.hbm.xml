<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="EbSupplierPopQuery">
		<![CDATA[
/* 物流供应商查询 */ 
select
ebsp.EBSP_JOB_ID/*JOB_ID*/ ,
ebsp.EBSP_SUPPLIERS_CODE/*SUPPLIERS_CODE*/ ,/*供应商编码*/
ebsp.EBSP_NAME_CN/*SUPPLIERS_NAME_CN*/ ,/*供应商名称*/
ebsp.EBSP_NAME_EN/*SUPPLIERS_NAME_EN*/ ,
ebsp.EBSP_SUPPLIERS_STATUS/*SUPPLIERS_STATUS*/ ,
EBSP.EBSP_TYPE,
EBSP.EBSP_TRANS_TYPE,
ebsp.EBSP_PROPERTY/*PROPERTY*/ ,
ebsp.EBSP_IS_UPDATE/*IS_UPDATE*/ ,
ebsp.EBSP_CORPORATE_NAME/*CORPORATE_NAME*/ ,
ebsp.EBSP_ID_CARD/*ID_CARD*/ ,
ebsp.EBSP_BUSINESS_LICENSE_NO/*BUSINESS_LICENSE_NO*/ ,
ebsp.EBSP_BUSINESS_LICENSE_DATE/*BUSINESS_LICENSE_DATE*/ ,
ebsp.EBSP_ORGAN_CODE/*ORGAN_CODE*/ ,
ebsp.EBSP_ORGAN_DATE/*ORGAN_DATE*/ ,
ebsp.EBSP_TAX_REGIST_NO/*TAX_REGIST_NO*/ ,
ebsp.EBSP_IS_VAT_INVOICE/*IS_VAT_INVOICE*/ ,
ebsp.EBSP_ADDRESS/*ADDRESS*/ ,
ebsp.EBSP_COUNTRY_CODE/*COUNTRY_CODE*/ ,
ebsp.EBSP_PROVINCE_CODE/*PROVINCE_CODE*/ ,
ebsp.EBSP_CITY_CODE/*CITY_CODE*/ ,
ebsp.EBSP_SUPPLIERS_GRADE/*SUPPLIERS_GRADE*/ ,
ebsp.EBSP_REGIST_DATE/*REGIST_DATE*/ ,
ebsp.EBSP_LOANING/*LOANING*/ ,
ebsp.EBSP_REGIST_CAPITAL/*REGIST_CAPITAL*/ ,
ebsp.NATURE ,
ebsp.EBSP_CONTACT/*CONTACTS*/ ,
ebsp.EBSP_CONTACT_TEL/*CONTACTS_MOBILE */,
ebsp.CONTACTS_PHONE_AREA ,
ebsp.CONTACTS_PHONE ,
ebsp.CONTACTS_POST ,
ebsp.EBSP_CONTACT_EMAIL/*CONTACTS_EMAIL*/ ,
ebsp.EBSP_CONTACT_ADDRESS/*CONTACTS_ADDRESS*/ ,
ebsp.BANK_ACCOUNT ,
ebsp.BANK_ACCOUNT_NAME ,
ebsp.PAYMENT_TYPE ,
ebsp.PAYMENT_TERMS ,
ebsp.INVOICE_CURRENCY ,
ebsp.PAYMENT_CURRENCY ,
ebsp.BANK_NAME ,
ebsp.BANK_ADDRESS ,
ebsp.BANK_CODE ,
ebsp.OIL_ACCOUNT ,
ebsp.EBSP_ROAD_NO_DATE/*ROAD_NO_DATE*/ ,
ebsp.EBSP_DATA_SOURCE/*DATA_SOURCE*/ ,
ebsp.EBSP_IS_DELETE/*IS_DELETE*/ ,
ebsp.REC_VER ,
ebsp.MODIFY_TIME ,
ebsp.MODIFIER ,
ebsp.CREATE_TIME ,
ebsp.CREATOR ,
ebsp.EBSP_IS_BLACK/*IS_BLACK*/ ,
ebsp.EBSP_EDIT_LINKS/*EDIT_LINKS*/ ,
ebsp.SUPPLIERS_OLD_CODE ,
ebsp.COMPANY_CODE ,
ebsp.SITE_CODE ,
ebsp.EBSP_INVOICE_TYPE/*INVOICE_TYPE*/ ,
ebsp.BUSINESS_LICENSE_DATE_FROM ,
ebsp.BUSINESS_LICENSE_DATE_TO
from eb_supplier ebsp
left join su_buss_services subs
on ebsp.EBSP_SUPPLIERS_CODE/*suppliers_code*/ = subs.suppliers_code
where 1=1 
<if !is_empty(suppliersCode,suppliersNameCn)>
	and (
			1 = 2 
			<< OR ebsp.EBSP_SUPPLIERS_CODE /* suppliers_code */like  '%'||:suppliersCode||'%' >> /*供应商代码*/ 
			<< OR ebsp.EBSP_NAME_CN /* suppliers_name_cn*/ like  '%'||:suppliersNameCn||'%' >> 
		) 
</if>
and ebsp.EBSP_IS_BLACK /*is_black*/ = 0 /*0-不是黑名单*/
and ebsp.EBSP_SUPPLIERS_STATUS /*SUPPLIERS_STATUS*/ = 30 /*合格供应商*/
and subs.BUSINESS_STATUS /*status*/ = 5 /*业务生效*/ 
<< and ebsp.suppliers_type = :suppliersType >>/*物流供应商-10，员工供应商-20，办公用品供应商-30,油卡供应商-40*/ 
<< and ebsp.EBSP_JOB_ID /* job_id */ = :supplierJobId >> /*供应商主键*/ 
<< and ebsp.EBSP_SUPPLIERS_CODE /*suppliers_code*/ like :suppliersCodeLike >> /*供应商代码 模糊查询*/ 
<< and ebsp.EBSP_NAME_CN /*suppliers_name_cn */ like :suppliersNameCnLike >>  
<< and subs.ebst_ebcd_id = :servicesType >>/*物流供应商的业务类型： 运输服务-TRANS、仓库管理-WH，装卸服务-HAND，仓库租赁-RENT，宅配-DELIVERY*/
		]]>
	</sql-query>
</hibernate-mapping>