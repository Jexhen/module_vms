<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="OwtVsEventListenerQuery">
		<![CDATA[
		select 
			vsel.VSEL_LISTENER_ID,
			vsel.VSEL_LISTENER_NAME,
			vsel.VSEL_LISTENER_TYPE,
			vsel.VSEL_LISTENER_EXPIRY_DATE,
			vsel.VSEL_IS_ACTIVITY,
			vsel.VSEL_IS_SUPPORT_LOCK,
			vsel.VSEL_BEFORE_PERSIST,
			vsel.VSEL_LISTENER_DESC,
			vsel.VSEL_LISTENER_TRIGGER_TYPE,
			vsel.REC_VER,
			vsel.REC_STATUS,
			vsel.TIME_ZONE,
			vsel.ORG_ID,
			vsel.CREATE_TIME,
			vsel.CREATOR,
			vsel.MODIFY_TIME,
			vsel.MODIFIER,
			vsel.PM_CODE,
			vsel.VSEL_VSSQ_PM_CODE
		  from vs_event_listener vsel
		 where 1=1
		   <<AND VSEL.ORG_ID=:orgId>>
		   <<and vsel.vsel_listener_type LIKE :eventObjectType>>
		   and vsel.pm_code =
		       (select vses.VSES_VSEL_PM_CODE
		          from vs_event_listener_event_group vses
		         where vses.VSES_VSEG_PM_CODE =
		               (select vseg.pm_code
		                  from vs_event_group vseg
		                 where 1=1
		                   <<and vseg.vseg_event_object_type LIKE :eventObjectType>>
		                   and vseg.pm_code =
		                       (select VSEC.VSEC_VSEG_PM_CODE
		                          from vs_event_group_status_code VSEC
		                         where VSEC.VSEC_VSSC_PM_CODE =
		                               (select vssc.pm_code
		                                  from VS_STATUS_CODE vssc
		                                 where 1=1
		                                   <<and vssc.org_id =:orgId>>
		                                   <<and vssc.vssc_status_code_name LIKE :statusCode>>))))
		]]>
	</sql-query>
</hibernate-mapping>