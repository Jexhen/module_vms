<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="TimerTransportNoteQuery">
		<![CDATA[
select eowo.eowo_work_order_no OMS_TASK_NO,
       etta_t.etdo_no          TMS_TASK_NO,
       eowo.eowo_vamp_no       CONTAINERIZED_NO,
       eowo.EOWO_LOGISTIC_NO
  from EO_WORK_ORDER eowo
/*tms信息*/
  left join (select etdo.etdo_no, etta.etta_work_order_no
               from ET_TASK etta
               left join ET_DISPATCH_ORDER etdo
                 ON etdo.etdo_no = etta.etta_do_no
              where 1 = 1) etta_t
    ON etta_t.etta_work_order_no = eowo.eowo_work_order_no
 where 1 = 1
      /*已经签收*/
   and eowo.eowo_status_code in ('160','90')
      /*类型*/
   and eowo.eowo_task_big_type in ('TRANSPORT_OUT', 'TRANSPORT')
      /*集拼单号不能为空*/
   and eowo.eowo_vamp_no is not null
      /**/
   and eowo.eowo_package_quantity > 0
      /*排除穿件异常*/
   and eowo.eowo_dispose_flag <> '20'
      /*回单时间不能为空*/
   and eowo.eowo_sign_date is not null
      /*未通知计费*/
   and nvl(eowo.eowo_business_state, 0) = 0
      /*只跑60天的数据*/
   and eowo.create_time > sysdate - :day

		]]>
	</sql-query>
</hibernate-mapping>