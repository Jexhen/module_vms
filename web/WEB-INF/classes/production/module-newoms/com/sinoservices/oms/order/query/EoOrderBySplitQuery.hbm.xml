<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="EoOrderBySplitQuery">
		<![CDATA[

SELECT 
EOOR.EOOR_ID,
EOOR.CREATOR,
EOOR.CREATE_TIME,
EOOR.MODIFIER,
EOOR.MODIFY_TIME,
EOOR.REC_VER,
EOOR.PM_CODE,
EOOR.TIME_ZONE,
EOOR.REC_STATUS,
EOOR.ORG_ID,
EOOR.EOOR_ORDER_NO,
EOOR.EOOR_LOGISTIC_NO,
EOOR.EOOR_ORDER_TYPE_CODE,
EOOR.EOOR_ORDER_TYPE_NAME,
EOOR.EOOR_PRIORITY_CODE,
EOOR.EOOR_PRIORITY_NAME,
EOOR.EOOR_TRANS_TYPE_CODE,
EOOR.EOOR_TRANS_TYPE_NAME,
EOOR.EOOR_STATUS_CODE,
EOOR.EOOR_STATUS_NAME,
EOOR.EOOR_CUSTOMER_CODE,
EOOR.EOOR_CUSTOMER_NAME,
EOOR.EOOR_CUSTOMER_CONTACT_CODE,
EOOR.EOOR_CUSTOMER_CONTACT_NAME,
EOOR.EOOR_CUSTOMER_CONTACT_PHONE,
EOOR.EOOR_ORDER_TIME,
EOOR.EOOR_DIVIDE_CODE,
EOOR.EOOR_DIVIDE_NAME,
EOOR.EOOR_REQUIRE_SHIPPER_TIME_FM,
EOOR.EOOR_REQUIRE_SHIPPER_TIME_TO,
EOOR.EOOR_REQUIRE_CONSIGNEE_TIME_FM,
EOOR.EOOR_REQUIRE_CONSIGNEE_TIME_TO,
EOOR.EOOR_ORDER_DEPARTMENT_CODE,
EOOR.EOOR_ORDER_DEPARTMENT_NAME,
EOOR.EOOR_OPERATE_DEPARTMENT_CODE,
EOOR.EOOR_OPERATE_DEPARTMENT_NAME,
EOOR.EOOR_SHIPPER_CODE,
EOOR.EOOR_SHIPPER_NAME,
EOOR.EOOR_SHIPPER_CONTACT_CODE,
EOOR.EOOR_SHIPPER_CONTACT_NAME,
EOOR.EOOR_SHIPPER_CONTACT_PHONE,
EOOR.EOOR_SHIPPER_LOCATION_CODE,
EOOR.EOOR_SHIPPER_LOCATION_NAME,
EOOR.EOOR_SHIPPER_REGION_CODE,
EOOR.EOOR_SHIPPER_REGION_NAME,
EOOR.EOOR_SHIPPER_CITY_CODE,
EOOR.EOOR_SHIPPER_CITY_NAME,
EOOR.EOOR_SHIPPER_DISTRICT_CODE,
EOOR.EOOR_SHIPPER_DISTRICT_NAME,
EOOR.EOOR_CONSIGNEE_CODE,
EOOR.EOOR_CONSIGNEE_NAME,
EOOR.EOOR_CONSIGNEE_CONTACT_CODE,
EOOR.EOOR_CONSIGNEE_CONTACT_NAME,
EOOR.EOOR_CONSIGNEE_CONTACT_PHONE,
EOOR.EOOR_CONSIGNEE_LOCATION_CODE,
EOOR.EOOR_CONSIGNEE_LOCATION_NAME,
EOOR.EOOR_CONSIGNEE_REGION_CODE,
EOOR.EOOR_CONSIGNEE_REGION_NAME,
EOOR.EOOR_CONSIGNEE_CITY_CODE,
EOOR.EOOR_CONSIGNEE_CITY_NAME,
EOOR.EOOR_CONSIGNEE_DISTRICT_CODE,
EOOR.EOOR_CONSIGNEE_DISTRICT_NAME,
EOOR.EOOR_PO_NO,
EOOR.EOOR_SO_NO,
EOOR.EOOR_SOURCE_CODE,
EOOR.EOOR_SOURCE_NAME,
EOOR.EOOR_DO_NO,
EOOR.EOOR_BARCODE,
EOOR.EOOR_PACKAGE_QUANTITY,
EOOR.EOOR_QUANTITY,
EOOR.EOOR_GROSS_WEIGHT,
EOOR.EOOR_NET_WEIGHT,
EOOR.EOOR_VOLUME,
EOOR.EOOR_REQUIREMENT,
EOOR.EOOR_REMARK,
EOOR.EOOR_MEGER_FLAG,
EOOR.EOOR_LINK_ORDER_NO,
EOOR.EOOR_EXPIRATION_TIME,
EOOR.EOOR_RESERVATION,
EOOR.EOOR_SALESMAN_CODE,
EOOR.EOOR_SALESMAN_NAME,
EOOR.EOOR_SPLIT_FLAG,
EOOR.EOOR_STATUS_COLOR,
EOOR.EOOR_EMERGENT_FLAG,
EOOR.EOOR_EVENT_OBJECT_CODE,
EOOR.EOOR_EVENT_OBJECT_NAME,
EOOR.EOOR_PAYMENT_TYPE_CODE,
EOOR.EOOR_PAYMENT_TYPE_NAME,
EOOR.EOOR_WAREHOUSER_CODE,
EOOR.EOOR_WAREHOUSER_NAME,
EOOR.EOOR_STATION_CODE,
EOOR.EOOR_STATION_NAME,
EOOR.EOOR_EDITABLE,
EOOR.EOOR_AMOUNT,
EOOR.EOOR_SELLING_CUSTOMER_NAME,
EOOR.EOOR_SELLING_CUSTOMER_CODE,
ESUS.ESUS_LOGIN_NAME,
ESUS.ESUS_USER_NAME_CN,
ESUS.ESUS_USER_NAME_EN,
(CASE WHEN  ESAI.ESAI_REF_ID IS NULL THEN 'N' ELSE 'Y'  END) FILE_FLAG,
(CASE WHEN EOOR_EMERGENT_FLAG='Y' THEN '!' ELSE NULL  END) as EMERGENT_MARK


 FROM 
  ( select 
  		t.EOOR_ID,
t.CREATOR,
t.CREATE_TIME,
t.MODIFIER,
t.MODIFY_TIME,
t.REC_VER,
t.PM_CODE,
t.TIME_ZONE,
t.REC_STATUS,
t.ORG_ID,
t.EOOR_ORDER_NO,
t.EOOR_LOGISTIC_NO,
t.EOOR_ORDER_TYPE_CODE,
t.EOOR_ORDER_TYPE_NAME,
t.EOOR_PRIORITY_CODE,
t.EOOR_PRIORITY_NAME,
t.EOOR_TRANS_TYPE_CODE,
t.EOOR_TRANS_TYPE_NAME,
t.EOOR_STATUS_CODE,
t.EOOR_STATUS_NAME,
t.EOOR_CUSTOMER_CODE,
t.EOOR_CUSTOMER_NAME,
t.EOOR_CUSTOMER_CONTACT_CODE,
t.EOOR_CUSTOMER_CONTACT_NAME,
t.EOOR_CUSTOMER_CONTACT_PHONE,
t.EOOR_ORDER_TIME,
t.EOOR_DIVIDE_CODE,
t.EOOR_DIVIDE_NAME,
t.EOOR_REQUIRE_SHIPPER_TIME_FM,
t.EOOR_REQUIRE_SHIPPER_TIME_TO,
t.EOOR_REQUIRE_CONSIGNEE_TIME_FM,
t.EOOR_REQUIRE_CONSIGNEE_TIME_TO,
t.EOOR_ORDER_DEPARTMENT_CODE,
t.EOOR_ORDER_DEPARTMENT_NAME,
t.EOOR_OPERATE_DEPARTMENT_CODE,
t.EOOR_OPERATE_DEPARTMENT_NAME,
t.EOOR_SHIPPER_CODE,
t.EOOR_SHIPPER_NAME,
t.EOOR_SHIPPER_CONTACT_CODE,
t.EOOR_SHIPPER_CONTACT_NAME,
t.EOOR_SHIPPER_CONTACT_PHONE,
t.EOOR_SHIPPER_LOCATION_CODE,
t.EOOR_SHIPPER_LOCATION_NAME,
t.EOOR_SHIPPER_REGION_CODE,
t.EOOR_SHIPPER_REGION_NAME,
t.EOOR_SHIPPER_CITY_CODE,
t.EOOR_SHIPPER_CITY_NAME,
t.EOOR_SHIPPER_DISTRICT_CODE,
t.EOOR_SHIPPER_DISTRICT_NAME,
t.EOOR_CONSIGNEE_CODE,
t.EOOR_CONSIGNEE_NAME,
t.EOOR_CONSIGNEE_CONTACT_CODE,
t.EOOR_CONSIGNEE_CONTACT_NAME,
t.EOOR_CONSIGNEE_CONTACT_PHONE,
t.EOOR_CONSIGNEE_LOCATION_CODE,
t.EOOR_CONSIGNEE_LOCATION_NAME,
t.EOOR_CONSIGNEE_REGION_CODE,
t.EOOR_CONSIGNEE_REGION_NAME,
t.EOOR_CONSIGNEE_CITY_CODE,
t.EOOR_CONSIGNEE_CITY_NAME,
t.EOOR_CONSIGNEE_DISTRICT_CODE,
t.EOOR_CONSIGNEE_DISTRICT_NAME,
t.EOOR_PO_NO,
t.EOOR_SO_NO,
t.EOOR_SOURCE_CODE,
t.EOOR_SOURCE_NAME,
t.EOOR_DO_NO,
t.EOOR_BARCODE,
t.EOOR_PACKAGE_QUANTITY,
t.EOOR_QUANTITY,
t.EOOR_GROSS_WEIGHT,
t.EOOR_NET_WEIGHT,
t.EOOR_VOLUME,
t.EOOR_REQUIREMENT,
t.EOOR_REMARK,
t.EOOR_MEGER_FLAG,
t.EOOR_LINK_ORDER_NO,
t.EOOR_EXPIRATION_TIME,
t.EOOR_RESERVATION,
t.EOOR_SALESMAN_CODE,
t.EOOR_SALESMAN_NAME,
t.EOOR_SPLIT_FLAG,
t.EOOR_STATUS_COLOR,
t.EOOR_EMERGENT_FLAG,
t.EOOR_EVENT_OBJECT_CODE,
t.EOOR_EVENT_OBJECT_NAME,
t.EOOR_PAYMENT_TYPE_CODE,
t.EOOR_PAYMENT_TYPE_NAME,
t.EOOR_WAREHOUSER_CODE,
t.EOOR_WAREHOUSER_NAME,
t.EOOR_STATION_CODE,
t.EOOR_STATION_NAME,
t.EOOR_EDITABLE,
t.EOOR_AMOUNT,
t.EOOR_SELLING_CUSTOMER_NAME,
t.EOOR_SELLING_CUSTOMER_CODE
  	from EO_ORDER t 
  	where 1=1
  	and t.REC_STATUS=0
  	<<and t.EOOR_ORDER_NO in (:orderNos) or t.EOOR_LINK_ORDER_NO in (:orderNos)>>
  	<<and t.ORG_ID=:orgId>> ) EOOR
 LEFT JOIN EO_ORDER_ITEM EOOI ON EOOR.EOOR_ORDER_NO=EOOI.EOOI_ORDER_NO AND EOOR.ORG_ID=EOOI.ORG_ID AND EOOI.REC_STATUS=0
 LEFT JOIN ES_USER ESUS ON EOOR.CREATOR=ESUS.ESUS_ID
 LEFT JOIN ES_ATTACHMENT_INFO ESAI ON EOOR.EOOR_ORDER_NO=ESAI.ESAI_REF_ID AND EOOR.ORG_ID=ESAI.ORG_ID
 where 1=1
 << and nvl(EOOR.EOOR_SPLIT_FLAG,'N') LIKE :splitFlag>>
order by EOOR.EOOR_ORDER_NO desc
		]]>
	</sql-query>
</hibernate-mapping>
