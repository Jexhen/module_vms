<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="EoOrderBillQuery">
		<![CDATA[




SELECT DISTINCT
(EODR.EOOR_ID) ORDER_ID,
EODR.ORG_ID ORG_ID,
EODR.EOOR_ORDER_NO ORDER_NO,
EODR.EOOR_LOGISTIC_NO LOGISTIC_NO,

EODR.EOOR_STATUS_CODE STATUS_CODE,
EODR.EOOR_STATUS_NAME STATUS_NAME,

EOOB.EOOR_CUSTOMER_CODE CUSTOMER_CODE,
EOOB.EOOR_CUSTOMER_NAME CUSTOMER_NAME,

EODR.EOOR_ORDER_TYPE_CODE ORDER_TYPE_CODE,
EODR.EOOR_ORDER_TYPE_NAME ORDER_TYPE_NAME,

EOOB.EOOR_SHIPPER_CODE SHIPPER_CODE,
EOOB.EOOR_SHIPPER_NAME SHIPPER_NAME,

EOOB.EOOR_SHIPPER_CONTACT_CODE SHIPPER_CONTACT_CODE,
EOOB.EOOR_SHIPPER_CONTACT_NAME SHIPPER_CONTACT_NAME,

EOOB.EOOR_CONSIGNEE_CODE CONSIGNEE_CODE,
EOOB.EOOR_CONSIGNEE_NAME CONSIGNEE_NAME,

EOOB.EOOR_CONSIGNEE_CONTACT_CODE CONSIGNEE_CONTACT_CODE,
EOOB.EOOR_CONSIGNEE_CONTACT_NAME CONSIGNEE_CONTACT_NAME,

EODR.EOOR_TRANS_TYPE_CODE TRANS_TYPE_CODE,
EODR.EOOR_TRANS_TYPE_NAME TRANS_TYPE_NAME,


EOOB.EOOR_CUSTOMER_CONTACT_CODE CUSTOMER_CONTACT_CODE,
EOOB.EOOR_CUSTOMER_CONTACT_NAME CUSTOMER_CONTACT_NAME,
EOOB.EOOR_CUSTOMER_CONTACT_PHONE CUSTOMER_CONTACT_PHONE,

EOOB.EOOR_EMERGENT_FLAG EMERGENT_FLAG,

EOOB.EOOR_PAYMENT_TYPE_CODE PAYMENT_TYPE_CODE,
EOOB.EOOR_PAYMENT_TYPE_NAME PAYMENT_TYPE_NAME,

EOOB.EOOR_PACKAGE_QUANTITY PACKAGE_QUANTITY,

EOOB.EOOR_QUANTITY QUANTITY,

EOOB.EOOR_GROSS_WEIGHT GROSS_WEIGHT,

EOOB.EOOR_NET_WEIGHT NET_WEIGHT,

EOOB.EOOR_VOLUME VOLUME,


EODR.EOOR_PRIORITY_CODE PRIORITY_CODE,
EODR.EOOR_PRIORITY_NAME PRIORITY_NAME,
EOOB.EOOR_ORDER_TIME ORDER_TIME ,
EODR.EOOR_SOURCE_CODE SOURCE_CODE,
EODR.EOOR_SOURCE_NAME SOURCE_NAME,
EOOB.EOOR_SHIPPER_CONTACT_PHONE SHIPPER_CONTACT_PHONE,
EOOB.EOOR_SHIPPER_LOCATION_CODE SHIPPER_LOCATION_CODE,
EOOB.EOOR_SHIPPER_LOCATION_NAME SHIPPER_LOCATION_NAME,
EODR.EOOR_OPERATE_DEPARTMENT_CODE OPERATE_DEPARTMENT_CODE,
EODR.EOOR_OPERATE_DEPARTMENT_NAME OPERATE_DEPARTMENT_NAME,
EODR.EOOR_ORDER_DEPARTMENT_CODE ORDER_DEPARTMENT_CODE,
EODR.EOOR_ORDER_DEPARTMENT_NAME ORDER_DEPARTMENT_NAME,
EOOB.EOOR_SHIPPER_REGION_CODE SHIPPER_REGION_CODE,
EOOB.EOOR_SHIPPER_REGION_NAME SHIPPER_REGION_NAME,
EOOB.EOOR_CONSIGNEE_CONTACT_PHONE CONSIGNEE_CONTACT_PHONE,
EOOB.EOOR_CONSIGNEE_LOCATION_CODE CONSIGNEE_LOCATION_CODE,
EOOB.EOOR_CONSIGNEE_LOCATION_NAME CONSIGNEE_LOCATION_NAME,
EOOB.EOOR_CONSIGNEE_REGION_CODE CONSIGNEE_REGION_CODE,
EOOB.EOOR_CONSIGNEE_REGION_NAME CONSIGNEE_REGION_NAME,
EODR.CREATOR

FROM EO_ORDER EODR 
LEFT JOIN EO_ORDER_BUSINESS EOOB ON EODR.EOOR_ORDER_NO=EOOB.EOOR_ORDER_NO AND EODR.ORG_ID=EOOB.ORG_ID
 <if is_not_empty(feeTypeCode) || is_not_empty(feeTypeName) || is_not_empty(rpFlagCode) || is_not_empty(rpFlagName)>
LEFT JOIN EO_FEE_MANAGEMENT_ORDER FEE
ON EODR.EOOR_ORDER_NO=FEE.EOFO_ORDER_NO
AND EODR.ORG_ID=FEE.ORG_ID
<< AND FEE.EOFO_FEE_TYPE_CODE=:feeTypeCode>>
<< AND FEE.EOFO_FEE_TYPE_NAME=:feeTypeName>>
<< AND FEE.EOFO_RP_FLAG_CODE=:rpFlagCode>>
<< AND FEE.EOFO_RP_FLAG_NAME=:rpFlagName>>
 </if>
WHERE 1=1
<< AND EODR.ORG_ID=:orgId>>
<< AND EODR.EOOR_ORDER_NO like :orderNo>>
<< AND EODR.EOOR_LOGISTIC_NO like :logisticNo>>
<< AND EOOB.EOOR_PO_NO like :poNo>>
<< AND EOOB.EOOR_SO_NO like :soNo>>
<< AND EOOB.EOOR_DO_NO like :doNo>>
<< AND EOOB.EOOR_CUSTOMER_CONTACT_PHONE LIKE:customerContactPhone>>
<< AND EODR.EOOR_SOURCE_CODE LIKE :sourceCode>>
<< AND EODR.EOOR_SOURCE_NAME LIKE :sourceName>>
<< AND EODR.EOOR_ORDER_TYPE_CODE LIKE :orderTypeCode>>
<< AND EODR.EOOR_ORDER_TYPE_NAME LIKE :orderTypeName>>
<< AND EODR.EOOR_PRIORITY_CODE LIKE :priorityCode>>
<< AND EODR.EOOR_PRIORITY_NAME LIKE :priorityName>>
<< AND EOOB.EOOR_EMERGENT_FLAG LIKE :emergentFlag>>
<< AND EODR.EOOR_STATUS_CODE LIKE:statusCode>>
<< AND EODR.EOOR_STATUS_NAME like :statusName>>
<< AND EOOB.EOOR_PAYMENT_TYPE_CODE LIKE :paymentTypeCode>>
<< AND EOOB.EOOR_PAYMENT_TYPE_NAME LIKE :paymentTypeName>>
<< AND EODR.EOOR_ORDER_DEPARTMENT_CODE LIKE :orderDepartmentCode>>
<< AND EODR.EOOR_ORDER_DEPARTMENT_NAME LIKE :orderDepartmentName>>
<< AND EODR.EOOR_OPERATE_DEPARTMENT_CODE LIKE :operateDepartmentCode>>
<< AND EODR.EOOR_OPERATE_DEPARTMENT_NAME LIKE :operateDepartmentName>>
<< AND EOOB.EOOR_CUSTOMER_CODE LIKE :customerCode>>
<< AND EOOB.EOOR_CUSTOMER_NAME LIKE :customerName>>
<< AND EOOB.EOOR_CUSTOMER_CONTACT_CODE LIKE :customerContactCode>>
<< AND EOOB.EOOR_CUSTOMER_CONTACT_NAME LIKE :customerContactName>>
<< AND EOOB.EOOR_ORDER_TIME>=:orderDateFrom>>
<< AND EOOB.EOOR_ORDER_TIME<=:orderDateTo>>
<< AND EOOB.EOOR_SHIPPER_CODE LIKE :shipperCode>>
<< AND EOOB.EOOR_SHIPPER_NAME LIKE :shipperName>>
<< AND EOOB.EOOR_SHIPPER_CONTACT_CODE LIKE :shipperContactCode>>
<< AND EOOB.EOOR_SHIPPER_CONTACT_NAME LIKE :shipperContactName>>
<< AND EOOB.EOOR_SHIPPER_CONTACT_PHONE LIKE :shipperContactPhone>>
<< AND EOOB.EOOR_SHIPPER_LOCATION_CODE LIKE :shipperLocationCode>>
<< AND EOOB.EOOR_SHIPPER_LOCATION_NAME LIKE :shipperLocationName>>
<< AND EOOB.EOOR_REQUIRE_SHIPPER_TIME_FM>=:requireShipperTimeFm>>
<< AND EOOB.EOOR_REQUIRE_SHIPPER_TIME_TO<=:requireShipperTimeTo>>
<< AND EOOB.EOOR_CONSIGNEE_CODE LIKE :consigneeCode>>
<< AND EOOB.EOOR_CONSIGNEE_NAME LIKE :consigneeName>>
<< AND EOOB.EOOR_CONSIGNEE_CONTACT_CODE LIKE :consigneeContactCode>>
<< AND EOOB.EOOR_CONSIGNEE_CONTACT_NAME LIKE :consigneeContactName>>
<< AND EOOB.EOOR_CONSIGNEE_CONTACT_PHONE LIKE :consigneeContactPhone>>
<< AND EOOB.EOOR_CONSIGNEE_LOCATION_CODE LIKE :consigneeLocationCode>>
<< AND EOOB.EOOR_CONSIGNEE_LOCATION_NAME LIKE :consigneeLocationName>>
<< AND EOOB.EOOR_REQUIRE_CONSIGNEE_TIME_FM>=:requireConsigneeTimeFm>>
<< AND EOOB.EOOR_REQUIRE_CONSIGNEE_TIME_TO<=:requireConsigneeTimeTo>>
<if hasFees=='N'>
	AND NOT EXISTS(SELECT DISTINCT EOFO_ORDER_NO FROM EO_FEE_MANAGEMENT_ORDER WHERE EODR.EOOR_ORDER_NO=EOFO_ORDER_NO)
</if>
<if hasFees=='Y'>
	AND EXISTS(SELECT 1 FROM EO_FEE_MANAGEMENT_ORDER WHERE EODR.EOOR_ORDER_NO=EOFO_ORDER_NO)
</if>
ORDER BY EODR.EOOR_ORDER_NO DESC

		]]>
	</sql-query>
</hibernate-mapping>
