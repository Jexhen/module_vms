<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="CdCommonMaterialPriceQuery">
		<![CDATA[

SELECT CDCP.CDCP_SALEPRICE,
       CDCP.CDCP_PROMOTIONPRICE,
       CDCP.CDCP_PROMOTION_START_DATE,
       CDCP.CDCP_PROMOTION_FINISH_DATE
  FROM CD_COMMON_MATERIAL_PRICE CDCP
 WHERE 1=1
   <<AND CDCP.CDCP_CDCM_NO LIKE :eooiItemCode>>
   <<AND CDCP.CDCP_OWNER_CODE LIKE :eoorCustomerCode>>
   <<and CDCP.ORG_ID=:orgId>>
   AND CDCP.CDCP_CONSIGNEE_CODE =
       (SELECT EBCU.PM_CODE
          FROM EB_CUSTOMER EBCU
          LEFT JOIN EB_CUSTOMER_DEALING EBCD
            ON EBCD.EBCD_CUSTOMER_NO = EBCU.PM_CODE
         WHERE 1 = 1
           <<AND EBCD.EBCD_DEALING_NO =:eoorConsigneeCode>>
           AND ROWNUM = 1)

		]]>
	</sql-query>
</hibernate-mapping>
