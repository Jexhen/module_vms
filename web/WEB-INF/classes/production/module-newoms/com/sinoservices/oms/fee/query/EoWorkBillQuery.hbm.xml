<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
	<sql-query name="EoWorkBillQuery">
		<![CDATA[

SELECT 
DISTINCT(EWORK.ORG_ID)ORG_ID,
EWORK.EOWO_WORK_ORDER_NO ORDER_NO,
EWORK.EOWO_WORK_NO LOGISTIC_NO,
EWORK.EOWO_ID ORDER_ID,



EWORK.EOWO_STATUS_CODE STATUS_CODE,
EWORK.EOWO_STATUS_NAME STATUS_NAME,

EWORK.EOWO_CUSTOMER_CODE CUSTOMER_CODE,
EWORK.EOWO_CUSTOMER_NAME CUSTOMER_NAME,

EWORK.EOWO_WORK_TYPE_CODE ORDER_TYPE_CODE,
EWORK.EOWO_WORK_TYPE_NAME ORDER_TYPE_NAME,

EWORK.EOWO_SHIPPER_CODE SHIPPER_CODE,
EWORK.EOWO_SHIPPER_NAME SHIPPER_NAME,

EWORK.EOWO_SHIPPER_CONTACT_CODE SHIPPER_CONTACT_CODE,
EWORK.EOWO_SHIPPER_CONTACT_NAME SHIPPER_CONTACT_NAME,

EWORK.EOWO_CONSIGNEE_CODE CONSIGNEE_CODE,
EWORK.EOWO_CONSIGNEE_NAME CONSIGNEE_NAME,


EWORK.EOWO_CONSIGNEE_CONTACT_CODE CONSIGNEE_CONTACT_CODE,
EWORK.EOWO_CONSIGNEE_CONTACT_NAME CONSIGNEE_CONTACT_NAME,

EWORK.EOWO_TRANS_TYPE_CODE TRANS_TYPE_CODE,
EWORK.EOWO_TRANS_TYPE_NAME TRANS_TYPE_NAME,

EWORK.EOWO_CUSTOMER_CONTACT_CODE CUSTOMER_CONTACT_CODE,
EWORK.EOWO_CUSTOMER_CONTACT_NAME CUSTOMER_CONTACT_NAME,
EWORK.EOWO_CUSTOMER_CONTACT_PHONE  CUSTOMER_CONTACT_PHONE,

EWORK.EOWO_MERGER_FLAG EMERGENT_FLAG,

EWORK.EOWO_PAYMENT_TYPE_CODE PAYMENT_TYPE_CODE,
EWORK.EOWO_PAYMENT_TYPE_NAME PAYMENT_TYPE_NAME,

EWORK.EOWO_PACKAGE_QUANTITY PACKAGE_QUANTITY,

EWORK.EOWO_QUANTITY QUANTITY,

EWORK.EOWO_GROSS_WEIGHT GROSS_WEIGHT,

EWORK.EOWO_NET_WEIGHT NET_WEIGHT,
 
EWORK.EOWO_VOLUME VOLUME,

EWORK.EOWO_PRIORITY_CODE PRIORITY_CODE,
EWORK.EOWO_PRIORITY_NAME PRIORITY_NAME,
EWORK.EOWO_ORDER_TIME ORDER_TIME ,
EWORK.EOWO_SOURCE_CODE SOURCE_CODE,
EWORK.EOWO_SOURCE_NAME SOURCE_NAME,
EWORK.EOWO_SHIPPER_CONTACT_PHONE SHIPPER_CONTACT_PHONE,
EWORK.EOWO_SHIPPER_LOCATION_CODE SHIPPER_LOCATION_CODE,
EWORK.EOWO_SHIPPER_LOCATION_NAME SHIPPER_LOCATION_NAME,
EWORK.EOWO_OPERATE_DEPARTMENT_CODE OPERATE_DEPARTMENT_CODE,
EWORK.EOWO_OPERATE_DEPARTMENT_NAME OPERATE_DEPARTMENT_NAME,
EWORK.EOWO_ORDER_DEPARTMENT_CODE ORDER_DEPARTMENT_CODE,
EWORK.EOWO_ORDER_DEPARTMENT_NAME ORDER_DEPARTMENT_NAME,
EWORK.EOWO_SHIPPER_REGION_CODE SHIPPER_REGION_CODE,
EWORK.EOWO_SHIPPER_REGION_NAME SHIPPER_REGION_NAME,
EWORK.EOWO_CONSIGNEE_CONTACT_PHONE CONSIGNEE_CONTACT_PHONE,
EWORK.EOWO_CONSIGNEE_LOCATION_CODE CONSIGNEE_LOCATION_CODE,
EWORK.EOWO_CONSIGNEE_LOCATION_NAME CONSIGNEE_LOCATION_NAME,
EWORK.EOWO_CONSIGNEE_REGION_CODE CONSIGNEE_REGION_CODE,
EWORK.EOWO_CONSIGNEE_REGION_NAME CONSIGNEE_REGION_NAME,
EWORK.EOWO_ORDER_NO   SYS_WICHWORK_ORDER_NO,

EWORK.EOWO_LOGISTIC_NO  EOWO_LOGISTIC_NO
FROM EO_WORK_ORDER EWORK
LEFT JOIN EO_FEE_MANAGEMENT_WORK FEE
ON EWORK.EOWO_WORK_ORDER_NO=FEE.EOFW_WORK_ORDER_NO
AND EWORK.EOWO_ORDER_NO = FEE.EOFW_ORDER_NO
AND EWORK.ORG_ID = FEE.ORG_ID
WHERE 1=1
<< AND EWORK.ORG_ID=:orgId >>
<< AND EWORK.EOWO_WORK_ORDER_NO like :orderNo>>
<< AND EWORK.EOWO_LOGISTIC_NO like :logisticNo>>
<< AND EWORK.EOWO_PO_NO like :poNo>>
<< AND EWORK.EOWO_SO_NO like :soNo>>
<< AND EWORK.EOWO_DO_NO like :doNo>>
<< AND EWORK.EOWO_CUSTOMER_CONTACT_PHONE LIKE :customerContactPhone>>
<< AND EWORK.EOWO_SOURCE_CODE LIKE :sourceCode>>
<< AND EWORK.EOWO_SOURCE_NAME LIKE :sourceName>>
<< AND EWORK.EOWO_ORDER_TYPE_CODE LIKE :orderTypeCode>>
<< AND EWORK.EOWO_ORDER_TYPE_NAME LIKE :orderTypeName>>
<< AND EWORK.EOWO_PRIORITY_CODE LIKE :priorityCode>>
<< AND EWORK.EOWO_PRIORITY_NAME LIKE :priorityName>>

<< AND EWORK.EOWO_STATUS_CODE LIKE :statusCode>>
<< AND EWORK.EOWO_STATUS_NAME like :statusName>>

<< AND FEE.EOFW_RP_FLAG_CODE LIKE :rpFlagCode>>
<< AND FEE.EOFW_RP_FLAG_NAME LIKE :rpFlagName>>

<< AND EWORK.EOWO_PAYMENT_TYPE_CODE LIKE :paymentTypeCode>>
<< AND EWORK.EOWO_PAYMENT_TYPE_NAME LIKE :paymentTypeName>>

<< AND EWORK.EOWO_ORDER_DEPARTMENT_CODE LIKE :orderDepartmentCode>>
<< AND EWORK.EOWO_ORDER_DEPARTMENT_NAME LIKE :orderDepartmentName>>

<< AND EWORK.EOWO_OPERATE_DEPARTMENT_CODE LIKE :operateDepartmentCode>>
<< AND EWORK.EOWO_OPERATE_DEPARTMENT_NAME LIKE :operateDepartmentName>>

<< AND FEE.EOFW_FEE_TYPE_CODE LIKE :feeTypeCode>>
<< AND FEE.EOFW_FEE_TYPE_NAME LIKE :feeTypeName>>

<< AND EWORK.EOWO_CUSTOMER_CODE LIKE :customerCode>>
<< AND EWORK.EOWO_CUSTOMER_NAME LIKE :customerName>>

<< AND EWORK.EOWO_CUSTOMER_CONTACT_CODE LIKE :customerContactCode>>
<< AND EWORK.EOWO_CUSTOMER_CONTACT_NAME LIKE :customerContactName>>

<< AND EWORK.EOWO_ORDER_TIME>=:orderDateFrom>>
<< AND EWORK.EOWO_ORDER_TIME<=:orderDateTo>>

<< AND EWORK.EOWO_SHIPPER_CODE LIKE :shipperCode>>
<< AND EWORK.EOWO_SHIPPER_NAME LIKE :shipperName>>

<< AND EWORK.EOWO_SHIPPER_CONTACT_CODE LIKE :shipperContactCode>>
<< AND EWORK.EOWO_SHIPPER_CONTACT_NAME LIKE :shipperContactName>>
<< AND EWORK.EOWO_SHIPPER_CONTACT_PHONE LIKE :shipperContactPhone>>

<< AND EWORK.EOWO_SHIPPER_LOCATION_CODE LIKE :shipperLocationCode>>
<< AND EWORK.EOWO_SHIPPER_LOCATION_NAME LIKE :shipperLocationName>>

<< AND EWORK.EOWO_REQUIRE_SHIPPER_TIME_FM>=:requireShipperTimeFm>>
<< AND EWORK.EOWO_REQUIRE_SHIPPER_TIME_TO<=:requireShipperTimeTo>>

<< AND EWORK.EOWO_CONSIGNEE_CODE LIKE :consigneeCode>>
<< AND EWORK.EOWO_CONSIGNEE_NAME LIKE :consigneeName>>

<< AND EWORK.EOWO_CONSIGNEE_CONTACT_CODE LIKE :consigneeContactCode>>
<< AND EWORK.EOWO_CONSIGNEE_CONTACT_NAME LIKE :consigneeContactName>>
<< AND EWORK.EOWO_CONSIGNEE_CONTACT_PHONE LIKE :consigneeContactPhone>>

<< AND EWORK.EOWO_CONSIGNEE_LOCATION_CODE LIKE :consigneeLocationCode>>
<< AND EWORK.EOWO_CONSIGNEE_LOCATION_NAME LIKE :consigneeLocationName>>

<< AND EWORK.EOWO_REQUIRE_CONSIGNEE_TIME_FM>=:requireConsigneeTimeFm>>
<< AND EWORK.EOWO_REQUIRE_CONSIGNEE_TIME_TO<=:requireConsigneeTimeTo>>
<if hasFees=='N'>
	AND NOT EXISTS (SELECT DISTINCT EOFW_WORK_ORDER_NO FROM EO_FEE_MANAGEMENT_WORK )
</if>
<if hasFees=='Y'>
	AND EWORK.EOWO_WORK_ORDER_NO IN(SELECT DISTINCT EOFW_WORK_ORDER_NO FROM EO_FEE_MANAGEMENT_WORK )
</if>
ORDER BY EWORK.EOWO_WORK_ORDER_NO DESC

		]]>
	</sql-query>
</hibernate-mapping>
