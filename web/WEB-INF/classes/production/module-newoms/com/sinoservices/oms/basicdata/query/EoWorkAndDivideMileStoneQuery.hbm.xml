<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC 
  "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
  "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
  <sql-query name="EoWorkAndDivideMileStoneQuery">
    <![CDATA[
    	select
	    	eodm.EODM_ID,
	    	eodm.CREATOR,
	    	eodm.CREATE_TIME,
	    	eodm.MODIFIER,
	    	eodm.MODIFY_TIME,
	    	eodm.REC_VER,
	    	eodm.REC_STATUS,
	    	eodm.ORG_ID,
	    	eodm.TIME_ZONE,
	    	eodm.PM_CODE,
	    	eodm.EODM_EODP_PM_CODE,
	    	eodm.EODM_SEQUENCE,
	    	eodm.EODM_EOWM_WORK_STATUS,
	    	eodm.EODM_ORDER_STATUS,
	    	eodm.EODM_EVENT_STATUS_CODE,
	    	eodm.EODM_EVENT_STATUS_NAME,
	    	eodm.EODM_WORK_TYPE_CODE,
	    	eodm.EODM_WORK_TYPE_NAME,
	    	eodm.EODM_EODR_SEQUENCE,
	    	eowm.EOWM_SEQUENCE,
			eowm.EOWM_CODE,
			eowm.EOWM_NAME,
			eowm.EOWM_NAME_EN,
			eowm.EOWM_WORK_TYPE_CODE,
			eowm.EOWM_WORK_TYPE_NAME,
			eowm.EOWM_EVENT_OBJECT_CODE,
			eowm.EOWM_EVENT_OBJECT_NAME,
			eowm.EOWM_EVENT_STATUS_CODE,
			eowm.EOWM_EVENT_STATUS_NAME,
			eowm.EOWM_PLAN_TIME_SQL,
			eowm.EOWM_REMARK,
			eowm.EOWM_WORK_STATUS,
			0.0 as SAVE_SEQUENCE
	    from eo_divide_milestone eodm
   left join eo_work_milestone eowm
		  on eodm.ORG_ID = eowm.ORG_ID
		 and eodm.EODM_WORK_TYPE_CODE = eowm.EOWM_WORK_TYPE_CODE
		 and eodm.eodm_eowm_work_status = eowm.eowm_work_status
	   where 1=1
	       <<and eodm.ORG_ID = :orgId>> 
	       <<and eodm.EODM_EODP_PM_CODE = :eodpPmCode>> 
	       <<and eodm.EODM_EODP_PM_CODE IN (:eodpPmCodes)>> 
	       <if orderNotNull=='Y'>
 		   	   and eodm.EODM_ORDER_STATUS is not null
		   </if>
	<if orderType=='find'>
		order by eodm.EODM_EODR_SEQUENCE,eowm.EOWM_SEQUENCE
	</if>
	<if orderType=='divi'>
		order by eodm.EODM_SEQUENCE  
	</if>
    ]]>
  </sql-query>
</hibernate-mapping>